<!-- Encoded Hard by Fyzpntekk notdev -->
<script>document.write(decodeURIComponent(escape(atob('PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImlkIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QW5pbWUgU3RyZWFtIC0gUHJlbWl1bSBQbGF0Zm9ybTwvdGl0bGU+CiAgICA8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20iPgogICAgPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tIiBjcm9zc29yaWdpbj4KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SW50ZXI6d2dodEAzMDA7NDAwOzUwMDs2MDA7NzAwOzgwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICA8c3R5bGU+CiAgICAgICAgKiB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICB9CgogICAgICAgIDpyb290IHsKICAgICAgICAgICAgLS1iZy1kYXJrOiAjMGEwZTE3OwogICAgICAgICAgICAtLWJnLWNhcmQ6ICMxYTFmMmU7CiAgICAgICAgICAgIC0tYmctZ2xhc3M6IHJnYmEoMjYsIDMxLCA0NiwgMC43KTsKICAgICAgICAgICAgLS1hY2NlbnQtdGVhbDogIzE0YjhhNjsKICAgICAgICAgICAgLS1hY2NlbnQtY3lhbjogIzA2YjZkNDsKICAgICAgICAgICAgLS1hY2NlbnQtZ29sZDogI2ZiYmYyNDsKICAgICAgICAgICAgLS10ZXh0LXByaW1hcnk6ICNmMWY1Zjk7CiAgICAgICAgICAgIC0tdGV4dC1zZWNvbmRhcnk6ICM5NGEzYjg7CiAgICAgICAgICAgIC0tYm9yZGVyLWdsYXNzOiByZ2JhKDE0OCwgMTYzLCAxODQsIDAuMSk7CiAgICAgICAgICAgIC0tc2hhZG93LWdsb3c6IDAgMCAzMHB4IHJnYmEoMjAsIDE4NCwgMTY2LCAwLjMpOwogICAgICAgIH0KCiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMGEwZTE3IDAlLCAjMWExZjJlIDEwMCUpOwogICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1wcmltYXJ5KTsKICAgICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7CiAgICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjsKICAgICAgICB9CgogICAgICAgIGJvZHk6OmJlZm9yZSB7CiAgICAgICAgICAgIGNvbnRlbnQ6ICcnOwogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmFkaWFsLWdyYWRpZW50KGNpcmNsZSBhdCAyMCUgNTAlLCByZ2JhKDIwLCAxODQsIDE2NiwgMC4wNSkgMCUsIHRyYW5zcGFyZW50IDUwJSksCiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlhbC1ncmFkaWVudChjaXJjbGUgYXQgODAlIDgwJSwgcmdiYSg2LCAxODIsIDIxMiwgMC4wNSkgMCUsIHRyYW5zcGFyZW50IDUwJSk7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgICAgICAgICB6LWluZGV4OiAwOwogICAgICAgIH0KCiAgICAgICAgLm5hdmJhciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgICAgICAgICAgdG9wOiAyMHB4OwogICAgICAgICAgICBsZWZ0OiA1MCU7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsKICAgICAgICAgICAgd2lkdGg6IDk1JTsKICAgICAgICAgICAgbWF4LXdpZHRoOiAxNDAwcHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLWdsYXNzKTsKICAgICAgICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDIwcHgpOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItZ2xhc3MpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4OwogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDMwcHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgei1pbmRleDogMTAwMDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA4cHggMzJweCByZ2JhKDAsIDAsIDAsIDAuMyksIDAgMCAyMHB4IHJnYmEoMjAsIDE4NCwgMTY2LCAwLjEpOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwogICAgICAgIH0KCiAgICAgICAgLm5hdmJhcjpob3ZlciB7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDMycHggcmdiYSgwLCAwLCAwLCAwLjQpLCB2YXIoLS1zaGFkb3ctZ2xvdyk7CiAgICAgICAgfQoKICAgICAgICAubG9nbyB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDgwMDsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgdmFyKC0tYWNjZW50LXRlYWwpLCB2YXIoLS1hY2NlbnQtY3lhbikpOwogICAgICAgICAgICAtd2Via2l0LWJhY2tncm91bmQtY2xpcDogdGV4dDsKICAgICAgICAgICAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5sb2dvOmhvdmVyIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsKICAgICAgICB9CgogICAgICAgIC5zZWFyY2gtY29udGFpbmVyIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZ2FwOiAxMHB4OwogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBtYXgtd2lkdGg6IDUwMHB4OwogICAgICAgICAgICBtYXJnaW46IDAgMzBweDsKICAgICAgICB9CgogICAgICAgIC5zZWFyY2gtaW5wdXQgewogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDE1LCAyMywgNDIsIDAuNik7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1nbGFzcyk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMjBweDsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5zZWFyY2gtaW5wdXQ6Zm9jdXMgewogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudC10ZWFsKTsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDIwcHggcmdiYSgyMCwgMTg0LCAxNjYsIDAuMik7CiAgICAgICAgfQoKICAgICAgICAuc2VhcmNoLWJ0biB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsIHZhcigtLWFjY2VudC10ZWFsKSwgdmFyKC0tYWNjZW50LWN5YW4pKTsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDI0cHg7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMjAsIDE4NCwgMTY2LCAwLjMpOwogICAgICAgIH0KCiAgICAgICAgLnNlYXJjaC1idG46aG92ZXIgewogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNnB4IDIwcHggcmdiYSgyMCwgMTg0LCAxNjYsIDAuNCk7CiAgICAgICAgfQoKICAgICAgICAuY29udGFpbmVyIHsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBtYXgtd2lkdGg6IDE0MDBweDsKICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgICAgICAgIHBhZGRpbmc6IDEyMHB4IDIwcHggNDBweDsKICAgICAgICAgICAgei1pbmRleDogMTsKICAgICAgICB9CgogICAgICAgIC5oZXJvIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgcmdiYSgyMCwgMTg0LCAxNjYsIDAuMSksIHJnYmEoNiwgMTgyLCAyMTIsIDAuMSkpOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItZ2xhc3MpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyNHB4OwogICAgICAgICAgICBwYWRkaW5nOiA2MHB4IDQwcHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDYwcHg7CiAgICAgICAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDhweCAzMnB4IHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWRlSW4gMC42cyBlYXNlOwogICAgICAgIH0KCiAgICAgICAgLmhlcm86OmJlZm9yZSB7CiAgICAgICAgICAgIGNvbnRlbnQ6ICcnOwogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHRvcDogLTUwJTsKICAgICAgICAgICAgcmlnaHQ6IC01MCU7CiAgICAgICAgICAgIHdpZHRoOiAyMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDIwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJhZGlhbC1ncmFkaWVudChjaXJjbGUsIHJnYmEoMjAsIDE4NCwgMTY2LCAwLjEpIDAlLCB0cmFuc3BhcmVudCA3MCUpOwogICAgICAgICAgICBhbmltYXRpb246IHJvdGF0ZSAyMHMgbGluZWFyIGluZmluaXRlOwogICAgICAgIH0KCiAgICAgICAgLmhlcm8tY29udGVudCB7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgei1pbmRleDogMTsKICAgICAgICB9CgogICAgICAgIC5oZXJvIGgxIHsKICAgICAgICAgICAgZm9udC1zaXplOiA0OHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogODAwOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCB2YXIoLS1hY2NlbnQtdGVhbCksIHZhcigtLWFjY2VudC1jeWFuKSwgdmFyKC0tYWNjZW50LWdvbGQpKTsKICAgICAgICAgICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICAgICAgICAgIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogICAgICAgIH0KCiAgICAgICAgLmhlcm8gcCB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDsKICAgICAgICB9CgogICAgICAgIC5zZWN0aW9uLXRpdGxlIHsKICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNzAwOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4OwogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDsKICAgICAgICB9CgogICAgICAgIC5zZWN0aW9uLXRpdGxlOjpiZWZvcmUgewogICAgICAgICAgICBjb250ZW50OiAnJzsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICB0b3A6IDUwJTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOwogICAgICAgICAgICB3aWR0aDogNHB4OwogICAgICAgICAgICBoZWlnaHQ6IDcwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE4MGRlZywgdmFyKC0tYWNjZW50LXRlYWwpLCB2YXIoLS1hY2NlbnQtY3lhbikpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4IHZhcigtLWFjY2VudC10ZWFsKTsKICAgICAgICB9CgogICAgICAgIC5ncmlkIHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMjAwcHgsIDFmcikpOwogICAgICAgICAgICBnYXA6IDI0cHg7CiAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZUluIDAuNnMgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5jYXJkIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctY2FyZCk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1nbGFzcyk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7CiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwgMCwgMCwgMC4zKTsKICAgICAgICB9CgogICAgICAgIC5jYXJkOmhvdmVyIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC04cHgpIHNjYWxlKDEuMDIpOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudC10ZWFsKTsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA4cHggMzBweCByZ2JhKDAsIDAsIDAsIDAuNCksIHZhcigtLXNoYWRvdy1nbG93KTsKICAgICAgICB9CgogICAgICAgIC5jYXJkLWltYWdlIHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGFzcGVjdC1yYXRpbzogMi8zOwogICAgICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuM3MgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5jYXJkOmhvdmVyIC5jYXJkLWltYWdlIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsKICAgICAgICB9CgogICAgICAgIC5jYXJkLWNvbnRlbnQgewogICAgICAgICAgICBwYWRkaW5nOiAxNXB4OwogICAgICAgIH0KCiAgICAgICAgLmNhcmQtdGl0bGUgewogICAgICAgICAgICBmb250LXNpemU6IDE1cHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDsKICAgICAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgICAgICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjsKICAgICAgICAgICAgLXdlYmtpdC1ib3gtb3JpZW50OiB2ZXJ0aWNhbDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB9CgogICAgICAgIC5jYXJkLW1ldGEgewogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICB9CgogICAgICAgIC5za2VsZXRvbiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgcmdiYSgyNiwgMzEsIDQ2LCAwLjQpIDI1JSwgcmdiYSgxNDgsIDE2MywgMTg0LCAwLjEpIDUwJSwgcmdiYSgyNiwgMzEsIDQ2LCAwLjQpIDc1JSk7CiAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMjAwJSAxMDAlOwogICAgICAgICAgICBhbmltYXRpb246IHNoaW1tZXIgMS41cyBpbmZpbml0ZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgIH0KCiAgICAgICAgLnNrZWxldG9uLWNhcmQgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iZy1jYXJkKTsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWdsYXNzKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTZweDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB9CgogICAgICAgIC5za2VsZXRvbi1pbWFnZSB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBhc3BlY3QtcmF0aW86IDIvMzsKICAgICAgICB9CgogICAgICAgIC5za2VsZXRvbi10ZXh0IHsKICAgICAgICAgICAgaGVpZ2h0OiAxNnB4OwogICAgICAgICAgICBtYXJnaW46IDEwcHggMTVweDsKICAgICAgICB9CgogICAgICAgIC5za2VsZXRvbi10ZXh0LXNob3J0IHsKICAgICAgICAgICAgaGVpZ2h0OiAxNHB4OwogICAgICAgICAgICB3aWR0aDogNjAlOwogICAgICAgICAgICBtYXJnaW46IDhweCAxNXB4IDE1cHg7CiAgICAgICAgfQoKICAgICAgICAuZGV0YWlsLWNvbnRhaW5lciB7CiAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZUluIDAuNnMgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5kZXRhaWwtaGVhZGVyIHsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAzMDBweCAxZnI7CiAgICAgICAgICAgIGdhcDogNDBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNDBweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctZ2xhc3MpOwogICAgICAgICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1nbGFzcyk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDI0cHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDMwcHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgOHB4IDMycHggcmdiYSgwLCAwLCAwLCAwLjMpOwogICAgICAgIH0KCiAgICAgICAgLmRldGFpbC1wb3N0ZXIgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTZweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA4cHggMzBweCByZ2JhKDAsIDAsIDAsIDAuNSksIDAgMCA0MHB4IHJnYmEoMjAsIDE4NCwgMTY2LCAwLjIpOwogICAgICAgIH0KCiAgICAgICAgLmRldGFpbC1pbmZvIGgxIHsKICAgICAgICAgICAgZm9udC1zaXplOiAzNnB4OwogICAgICAgICAgICBmb250LXdlaWdodDogODAwOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCB2YXIoLS1hY2NlbnQtdGVhbCksIHZhcigtLWFjY2VudC1jeWFuKSk7CiAgICAgICAgICAgIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogICAgICAgICAgICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIGJhY2tncm91bmQtY2xpcDogdGV4dDsKICAgICAgICB9CgogICAgICAgIC5nZW5yZS1jaGlwcyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsKICAgICAgICAgICAgZ2FwOiAxMHB4OwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgICAgIH0KCiAgICAgICAgLmNoaXAgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDIwLCAxODQsIDE2NiwgMC4yKSwgcmdiYSg2LCAxODIsIDIxMiwgMC4yKSk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWFjY2VudC10ZWFsKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDsKICAgICAgICAgICAgcGFkZGluZzogNnB4IDE2cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgICAgICAgICAgY29sb3I6IHZhcigtLWFjY2VudC10ZWFsKTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICB9CgogICAgICAgIC5jaGlwOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgcmdiYSgyMCwgMTg0LCAxNjYsIDAuMyksIHJnYmEoNiwgMTgyLCAyMTIsIDAuMykpOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMTVweCByZ2JhKDIwLCAxODQsIDE2NiwgMC4zKTsKICAgICAgICB9CgogICAgICAgIC5zeW5vcHNpcyB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuODsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICB9CgogICAgICAgIC5pbmZvLXJvdyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGdhcDogMTBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIH0KCiAgICAgICAgLmluZm8tbGFiZWwgewogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICBjb2xvcjogdmFyKC0tYWNjZW50LXRlYWwpOwogICAgICAgICAgICBtaW4td2lkdGg6IDEwMHB4OwogICAgICAgIH0KCiAgICAgICAgLmVwaXNvZGUtZ3JpZCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE1MHB4LCAxZnIpKTsKICAgICAgICAgICAgZ2FwOiAxNnB4OwogICAgICAgIH0KCiAgICAgICAgLmVwaXNvZGUtY2FyZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJnLWNhcmQpOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItZ2xhc3MpOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgICAgICAgfQoKICAgICAgICAuZXBpc29kZS1jYXJkOmhvdmVyIHsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC00cHgpOwogICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudC1jeWFuKTsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgcmdiYSg2LCAxODIsIDIxMiwgMC4xKSwgcmdiYSgyMCwgMTg0LCAxNjYsIDAuMSkpOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDZweCAyMHB4IHJnYmEoMCwgMCwgMCwgMC40KSwgMCAwIDIwcHggcmdiYSg2LCAxODIsIDIxMiwgMC4zKTsKICAgICAgICB9CgogICAgICAgIC5wbGF5ZXItY29udGFpbmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctZ2xhc3MpOwogICAgICAgICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7CiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWFjY2VudC10ZWFsKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA4cHggMzJweCByZ2JhKDAsIDAsIDAsIDAuNCksIHZhcigtLXNoYWRvdy1nbG93KTsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWRlSW4gMC42cyBlYXNlOwogICAgICAgIH0KCiAgICAgICAgLnBsYXllci1pZnJhbWUgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgYXNwZWN0LXJhdGlvOiAxNi85OwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMwMDA7CiAgICAgICAgfQoKICAgICAgICAuc2VydmVyLWxpc3QgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7CiAgICAgICAgICAgIGdhcDogMTJweDsKICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgICAgICB9CgogICAgICAgIC5zZXJ2ZXItYnRuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctY2FyZCk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1nbGFzcyk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMjRweDsKICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtcHJpbWFyeSk7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIH0KCiAgICAgICAgLnNlcnZlci1idG46aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCByZ2JhKDIwLCAxODQsIDE2NiwgMC4yKSwgcmdiYSg2LCAxODIsIDIxMiwgMC4yKSk7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50LXRlYWwpOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgyMCwgMTg0LCAxNjYsIDAuMyk7CiAgICAgICAgfQoKICAgICAgICAuc2VydmVyLWJ0bi5hY3RpdmUgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCB2YXIoLS1hY2NlbnQtdGVhbCksIHZhcigtLWFjY2VudC1jeWFuKSk7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50LWN5YW4pOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMjAsIDE4NCwgMTY2LCAwLjQpOwogICAgICAgIH0KCiAgICAgICAgLmVycm9yLWNvbnRhaW5lciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBtaW4taGVpZ2h0OiA0MDBweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmctZ2xhc3MpOwogICAgICAgICAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMjBweCk7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1nbGFzcyk7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDI0cHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDYwcHggNDBweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBhbmltYXRpb246IGZhZGVJbiAwLjZzIGVhc2U7CiAgICAgICAgfQoKICAgICAgICAuZXJyb3ItaWNvbiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogODBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICAgICAgb3BhY2l0eTogMC41OwogICAgICAgIH0KCiAgICAgICAgLmVycm9yLXRpdGxlIHsKICAgICAgICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogNzAwOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgICAgICBjb2xvcjogdmFyKC0tYWNjZW50LXRlYWwpOwogICAgICAgIH0KCiAgICAgICAgLmVycm9yLW1lc3NhZ2UgewogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7CiAgICAgICAgICAgIG1heC13aWR0aDogNTAwcHg7CiAgICAgICAgfQoKICAgICAgICAucmV0cnktYnRuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgdmFyKC0tYWNjZW50LXRlYWwpLCB2YXIoLS1hY2NlbnQtY3lhbikpOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDE0cHggMzJweDsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDIwLCAxODQsIDE2NiwgMC4zKTsKICAgICAgICB9CgogICAgICAgIC5yZXRyeS1idG46aG92ZXIgewogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNnB4IDIwcHggcmdiYSgyMCwgMTg0LCAxNjYsIDAuNCk7CiAgICAgICAgfQoKICAgICAgICAubG9hZGluZy10ZXh0IHsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7CiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7CiAgICAgICAgICAgIG1hcmdpbjogNDBweCAwOwogICAgICAgICAgICBhbmltYXRpb246IHB1bHNlIDEuNXMgaW5maW5pdGU7CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7CiAgICAgICAgICAgIGZyb20gewogICAgICAgICAgICAgICAgb3BhY2l0eTogMDsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgyMHB4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0byB7CiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxOwogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIHNoaW1tZXIgewogICAgICAgICAgICAwJSB7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtMjAwJSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIDEwMCUgewogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogMjAwJSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBAa2V5ZnJhbWVzIHJvdGF0ZSB7CiAgICAgICAgICAgIDAlIHsKICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIDEwMCUgewogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQGtleWZyYW1lcyBwdWxzZSB7CiAgICAgICAgICAgIDAlLCAxMDAlIHsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgNTAlIHsKICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuNTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDk2OHB4KSB7CiAgICAgICAgICAgIC5uYXZiYXIgewogICAgICAgICAgICAgICAgd2lkdGg6IDkwJTsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMjBweDsKICAgICAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLnNlYXJjaC1jb250YWluZXIgewogICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDAgMCAwOwogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5oZXJvIGgxIHsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMzJweDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLmhlcm8gcCB7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5kZXRhaWwtaGVhZGVyIHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOwogICAgICAgICAgICAgICAgZ2FwOiAzMHB4OwogICAgICAgICAgICB9CgogICAgICAgICAgICAuZGV0YWlsLXBvc3RlciB7CiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDMwMHB4OwogICAgICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5kZXRhaWwtaW5mbyBoMSB7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDI4cHg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5ncmlkIHsKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDE1MHB4LCAxZnIpKTsKICAgICAgICAgICAgICAgIGdhcDogMTZweDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDY0MHB4KSB7CiAgICAgICAgICAgIC5jb250YWluZXIgewogICAgICAgICAgICAgICAgcGFkZGluZzogMTAwcHggMTVweCAzMHB4OwogICAgICAgICAgICB9CgogICAgICAgICAgICAuaGVybyB7CiAgICAgICAgICAgICAgICBwYWRkaW5nOiA0MHB4IDI1cHg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5oZXJvIGgxIHsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjhweDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLnNlY3Rpb24tdGl0bGUgewogICAgICAgICAgICAgICAgZm9udC1zaXplOiAyMnB4OwogICAgICAgICAgICB9CgogICAgICAgICAgICAuZ3JpZCB7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgxNDBweCwgMWZyKSk7CiAgICAgICAgICAgICAgICBnYXA6IDEycHg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5lcGlzb2RlLWdyaWQgewogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMTIwcHgsIDFmcikpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxuYXYgY2xhc3M9Im5hdmJhciI+CiAgICAgICAgPGRpdiBjbGFzcz0ibG9nbyIgb25jbGljaz0icm91dGVyLm5hdmlnYXRlKCcnKSI+QU5JTUUgU1RSRUFNPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic2VhcmNoLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0ic2VhcmNoLWlucHV0IiBwbGFjZWhvbGRlcj0iQ2FyaSBhbmltZS4uLiIgaWQ9InNlYXJjaElucHV0Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2VhcmNoLWJ0biIgb25jbGljaz0icGVyZm9ybVNlYXJjaCgpIj5TZWFyY2g8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvbmF2PgoKICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciIgaWQ9ImFwcCI+PC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgICAgICAgKiBQZXJ1YmFoYW46CiAgICAgICAgICogLSBQYW5nZ2lsYW4gQVBJIGRpc2VzdWFpa2FuIGtlIGVuZHBvaW50IE90YWt1ZGVzdSB5YW5nIGthbXUga2lyaW06CiAgICAgICAgICogICAvYW5pbWUvaG9tZSwgL2FuaW1lLzpzbHVnLCAvZXBpc29kZS86c2x1ZywgL3NlcnZlci86aWQKICAgICAgICAgKiAtIFJlc3BvbnNlIGRpbm9ybWFsaXNhc2kgKG1hcHBpbmcpIHNlaGluZ2dhIFVJIHRpZGFrIHBlcmx1IGRpdWJhaC4KICAgICAgICAgKiAtIEppa2Egc2VydmVyIG1lbmdlbWJhbGlrYW4gZm9ybWF0IGFsdGVybmF0aWYsIHNjcmlwdCBtZW5jb2JhIGJlYmVyYXBhIGtleS4KICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgICAgIGNvbnN0IEFQSV9CQVNFID0gJ2h0dHBzOi8vd3d3LnNhbmthdm9sbGVyZWkuY29tL2FuaW1lJzsgLy8gdGV0YXAKICAgICAgICBjb25zdCBUSU1FT1VUID0gMTUwMDA7CgogICAgICAgIC8vIFV0aWxpdHk6IGZldGNoIGRlbmdhbiB0aW1lb3V0LCBtZW5nZW1iYWxpa2FuIHBhcnNlZCBKU09OIGF0YXUgbWVsZW1wYXIgZXJyb3IKICAgICAgICBhc3luYyBmdW5jdGlvbiBhcGlHZXQoZW5kcG9pbnQpIHsKICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTsKICAgICAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIFRJTUVPVVQpOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVBJX0JBU0V9JHtlbmRwb2ludH1gLCB7CiAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTsKCiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOwogICAgICAgICAgICAgICAgbGV0IGpzb24gPSBudWxsOwogICAgICAgICAgICAgICAgdHJ5IHsganNvbiA9IHRleHQgPyBKU09OLnBhcnNlKHRleHQpIDogbnVsbDsgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIC8vIGppa2EgYnVrYW4gSlNPTiwgbGVtcGFyIGVycm9yIHRlcmtvbnRyb2wKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgSlNPTiByZXNwb25zZSBmcm9tIHNlcnZlcicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgICAgICAvLyBzZXJ0YWthbiBwZXNhbiBqaWthIGFkYQogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IChqc29uICYmIChqc29uLm1lc3NhZ2UgfHwganNvbi5lcnJvcikpID8gKGpzb24ubWVzc2FnZSB8fCBqc29uLmVycm9yKSA6IGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfWA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKG1zZyk7CiAgICAgICAgICAgICAgICAgICAgZXJyLnN0YXR1cyA9IHJlc3BvbnNlLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICBlcnIuYm9keSA9IGpzb247CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBqc29uOwogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7CiAgICAgICAgICAgICAgICAvLyBqaWthIGFib3J0IC0+IHRpbWVvdXQKICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHRocm93IG5ldyBFcnJvcignUmVxdWVzdCB0aW1lZCBvdXQnKTsKICAgICAgICAgICAgICAgIHRocm93IGVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBIZWxwZXI6IG5vcm1hbGlzYXNpIGl0ZW0gYW5pbWUgYWdhciBzZXN1YWkgeWcgZGktcmVuZGVyIChzbHVnLHRpdGxlLHBvc3RlcixzdGF0dXMsZXBpc29kZV9jb3VudCkKICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVBbmltZUl0ZW0ocmF3KSB7CiAgICAgICAgICAgIC8vIHJhdyBiaXNhIG1lbWlsaWtpIGJlcmJhZ2FpIHN0cnVrdHVyOyBjb2JhIGJlYmVyYXBhIGZpZWxkIHVtdW0KICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHNsdWc6IHJhdy5zbHVnIHx8IHJhdy51cmwgfHwgcmF3LmxpbmsgfHwgcmF3LnBhdGggfHwgcmF3LmlkIHx8IChyYXcudGl0bGUgJiYgc2x1Z2lmeShyYXcudGl0bGUpKSB8fCAnJywKICAgICAgICAgICAgICAgIHRpdGxlOiByYXcudGl0bGUgfHwgcmF3Lm5hbWUgfHwgcmF3Lmp1ZHVsIHx8IHJhdy5hbmltZV90aXRsZSB8fCAnJywKICAgICAgICAgICAgICAgIHBvc3RlcjogcmF3LnBvc3RlciB8fCByYXcuaW1hZ2UgfHwgcmF3LnRodW1iIHx8IHJhdy50aHVtYm5haWwgfHwgcmF3LmNvdmVyIHx8ICcnLAogICAgICAgICAgICAgICAgc3RhdHVzOiByYXcuc3RhdHVzIHx8IHJhdy5zdGF0ZSB8fCByYXcuZXBpc29kZV9zdGF0dXMgfHwgJycsCiAgICAgICAgICAgICAgICBlcGlzb2RlX2NvdW50OiByYXcuZXBpc29kZV9jb3VudCB8fCByYXcudG90YWxfZXBzIHx8IHJhdy5lcGlzb2RlcyB8fCByYXcuZXBfY291bnQgfHwgJycKICAgICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIC8vIGJ1YXQgc2x1ZyBzZWRlcmhhbmEgZGFyaSBqdWR1bCBqaWthIHRpZGFrIGFkYSBzbHVnCiAgICAgICAgZnVuY3Rpb24gc2x1Z2lmeSh0ZXh0KSB7CiAgICAgICAgICAgIGlmICghdGV4dCkgcmV0dXJuICcnOwogICAgICAgICAgICByZXR1cm4gU3RyaW5nKHRleHQpLnRvTG93ZXJDYXNlKCkudHJpbSgpLnJlcGxhY2UoL1teXHdcLV0rL2csICctJykucmVwbGFjZSgvXC0rL2csICctJyk7CiAgICAgICAgfQoKICAgICAgICAvLyBST1VURVIgKHNhbWEgbG9naWNueWEpCiAgICAgICAgY29uc3Qgcm91dGVyID0gewogICAgICAgICAgICBjdXJyZW50Um91dGU6ICcnLAoKICAgICAgICAgICAgaW5pdCgpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKCkgPT4gdGhpcy5oYW5kbGVSb3V0ZSgpKTsKICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUm91dGUoKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIG5hdmlnYXRlKHBhdGgpIHsKICAgICAgICAgICAgICAgIC8vIHN1cHBvcnQgZW1wdHkgdG8gZ28gaG9tZQogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBwYXRoIHx8ICcvJzsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGhhbmRsZVJvdXRlKCkgewogICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpIHx8ICcvJzsKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFJvdXRlID0gaGFzaDsKCiAgICAgICAgICAgICAgICBpZiAoaGFzaCA9PT0gJy8nIHx8IGhhc2ggPT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgcmVuZGVySG9tZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNoLnN0YXJ0c1dpdGgoJy9hbmltZS8nKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsdWcgPSBoYXNoLnNwbGl0KCcvYW5pbWUvJylbMV07CiAgICAgICAgICAgICAgICAgICAgcmVuZGVyRGV0YWlsKGRlY29kZVVSSUNvbXBvbmVudChzbHVnKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhc2guc3RhcnRzV2l0aCgnL2VwaXNvZGUvJykpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzbHVnID0gaGFzaC5zcGxpdCgnL2VwaXNvZGUvJylbMV07CiAgICAgICAgICAgICAgICAgICAgcmVuZGVyRXBpc29kZShkZWNvZGVVUklDb21wb25lbnQoc2x1ZykpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChoYXNoLnN0YXJ0c1dpdGgoJy9zZWFyY2gvJykpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXl3b3JkID0gaGFzaC5zcGxpdCgnL3NlYXJjaC8nKVsxXTsKICAgICAgICAgICAgICAgICAgICByZW5kZXJTZWFyY2goZGVjb2RlVVJJQ29tcG9uZW50KGtleXdvcmQpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZmFsbGJhY2sga2UgaG9tZQogICAgICAgICAgICAgICAgICAgIHJlbmRlckhvbWUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIC8vIFJlbmRlcmluZyBoZWxwZXJzICh0aWRhayBkaXViYWggdGFtcGlsYW5ueWEsIGhhbnlhIGRhdGEtc291cmNlKQogICAgICAgIGZ1bmN0aW9uIHJlbmRlclNrZWxldG9uKGNvdW50ID0gMTIpIHsKICAgICAgICAgICAgY29uc3Qgc2tlbGV0b25zID0gQXJyYXkoY291bnQpLmZpbGwoMCkubWFwKCgpID0+IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNrZWxldG9uLWNhcmQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNrZWxldG9uIHNrZWxldG9uLWltYWdlIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJza2VsZXRvbiBza2VsZXRvbi10ZXh0Ij48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJza2VsZXRvbiBza2VsZXRvbi10ZXh0LXNob3J0Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgKS5qb2luKCcnKTsKCiAgICAgICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0iZ3JpZCI+JHtza2VsZXRvbnN9PC9kaXY+YDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckVycm9yKG1lc3NhZ2UsIG9uUmV0cnlDYWxsKSB7CiAgICAgICAgICAgIC8vIG9uUmV0cnlDYWxsOiBzdHJpbmcgbmFtYSBmdW5nc2kgYXRhdSBudWxsCiAgICAgICAgICAgIGNvbnN0IHJldHJ5QXR0ciA9IG9uUmV0cnlDYWxsID8gYG9uY2xpY2s9IiR7b25SZXRyeUNhbGx9ImAgOiAnJzsKICAgICAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVycm9yLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXJyb3ItaWNvbiI+4pqg77iPPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXJyb3ItdGl0bGUiPk9vcHMhIFNvbWV0aGluZyB3ZW50IHdyb25nPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXJyb3ItbWVzc2FnZSI+JHtlc2NhcGVIdG1sKG1lc3NhZ2UpfTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InJldHJ5LWJ0biIgJHtyZXRyeUF0dHJ9PlJldHJ5PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGVzY2FwZUh0bWwocyl7IHJldHVybiBTdHJpbmcoc3x8JycpLnJlcGxhY2UoL1smPD4iJ10vZywgYyA9PiAoeycmJzonJmFtcDsnLCc8JzonJmx0OycsJz4nOicmZ3Q7JywnIic6JyZxdW90OycsIiciOicmIzM5Oyd9W2NdKSk7IH0KCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQW5pbWVDYXJkKGFuaW1lKSB7CiAgICAgICAgICAgIC8vIGFuaW1lIGV4cGVjdGVkOiB7c2x1Zyx0aXRsZSxwb3N0ZXIsc3RhdHVzLGVwaXNvZGVfY291bnR9CiAgICAgICAgICAgIGNvbnN0IHNhZmVQb3N0ZXIgPSBlc2NhcGVIdG1sKGFuaW1lLnBvc3RlciB8fCAnaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzMwMHg0NTA/dGV4dD1ObytJbWFnZScpOwogICAgICAgICAgICBjb25zdCBzYWZlVGl0bGUgPSBlc2NhcGVIdG1sKGFuaW1lLnRpdGxlIHx8ICdVbnRpdGxlZCcpOwogICAgICAgICAgICBjb25zdCBzYWZlU2x1ZyA9IGVuY29kZVVSSUNvbXBvbmVudChhbmltZS5zbHVnIHx8IHNhZmVUaXRsZSk7CiAgICAgICAgICAgIHJldHVybiBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIiBvbmNsaWNrPSJyb3V0ZXIubmF2aWdhdGUoJy9hbmltZS8ke3NhZmVTbHVnfScpIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iJHtzYWZlUG9zdGVyfSIgYWx0PSIke3NhZmVUaXRsZX0iIGNsYXNzPSJjYXJkLWltYWdlIiBsb2FkaW5nPSJsYXp5Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWNvbnRlbnQiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLXRpdGxlIj4ke3NhZmVUaXRsZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1tZXRhIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7ZXNjYXBlSHRtbChhbmltZS5zdGF0dXMgfHwgJ04vQScpfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7ZXNjYXBlSHRtbChhbmltZS5lcGlzb2RlX2NvdW50IHx8ICc/Jyl9IEVwczwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgYDsKICAgICAgICB9CgogICAgICAgIC8qID09PT09PT09PT0gVklFVzogSE9NRSA9PT09PT09PT09ICovCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcmVuZGVySG9tZSgpIHsKICAgICAgICAgICAgY29uc3QgYXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpOwogICAgICAgICAgICBhcHAuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVybyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVyby1jb250ZW50Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlByZW1pdW0gQW5pbWUgU3RyZWFtaW5nPC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+V2F0Y2ggdGhvdXNhbmRzIG9mIGFuaW1lIHdpdGggaGlnaCBxdWFsaXR5IHN0cmVhbWluZzwvcD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIj5MYXRlc3QgQW5pbWU8L2gyPgogICAgICAgICAgICAgICAgJHtyZW5kZXJTa2VsZXRvbigxMil9CiAgICAgICAgICAgIGA7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gcGFuZ2dpbCBlbmRwb2ludCB5YW5nIGJlbmFyOiAvYW5pbWUvaG9tZQogICAgICAgICAgICAgICAgY29uc3QgcmF3ID0gYXdhaXQgYXBpR2V0KCcvaG9tZScpOyAvLyA9PiB2YXJpb3VzIHNoYXBlcwogICAgICAgICAgICAgICAgLy8gTm9ybWFsaXNhc2k6IGNhcmkgYW5pbWVfbGlzdCBhdGF1IGRhdGEuKiBhcnJheXMKICAgICAgICAgICAgICAgIGxldCBhbmltZUxpc3QgPSBbXTsKCiAgICAgICAgICAgICAgICAvLyAxKSBsYW5nc3VuZyBhbmltZV9saXN0CiAgICAgICAgICAgICAgICBpZiAocmF3ICYmIEFycmF5LmlzQXJyYXkocmF3LmFuaW1lX2xpc3QpKSB7CiAgICAgICAgICAgICAgICAgICAgYW5pbWVMaXN0ID0gcmF3LmFuaW1lX2xpc3QubWFwKG5vcm1hbGl6ZUFuaW1lSXRlbSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJhdyAmJiByYXcuZGF0YSkgewogICAgICAgICAgICAgICAgICAgIC8vIGppa2EgYWRhIGRhdGEgb2JqZWN0LCBnYWJ1bmdrYW4gYXJyYXkgeWFuZyBtdW5na2luIGJlcm5hbWEgbGF0ZXN0X3VwZGF0ZSwgcmVjb21tZW5kZWQsIHRyZW5kaW5nLCByZXN1bHRzLCBsaXN0CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IHJhdy5kYXRhOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBbJ2FuaW1lX2xpc3QnLCdsYXRlc3RfdXBkYXRlJywncmVjb21tZW5kZWQnLCd0cmVuZGluZycsJ3Jlc3VsdHMnLCdsaXN0JywnZGF0YScsJ2l0ZW1zJ10uZm9yRWFjaChrPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRba10pKSBjYW5kaWRhdGVzLnB1c2goLi4uZFtrXSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgLy8gamlrYSB0aWRhayBhZGEgZGkgZGF0YSwgY2VrIGxhbmdzdW5nIGRpIHJhdyBmaWVsZHMKICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29iYSBjYXJpIGFycmF5IGRpIHJhdyByb290CiAgICAgICAgICAgICAgICAgICAgICAgIFsncmVzdWx0cycsJ2l0ZW1zJywnbGlzdCcsJ2RhdGEnLCdhbmltZSddLmZvckVhY2goaz0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmF3W2tdKSkgY2FuZGlkYXRlcy5wdXNoKC4uLnJhd1trXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBmYWxsYmFjazogaWYgcmF3IGhhcyB0b3AtbGV2ZWwgYXJyYXkKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyYXcpKSBjYW5kaWRhdGVzLnB1c2goLi4ucmF3KTsKCiAgICAgICAgICAgICAgICAgICAgYW5pbWVMaXN0ID0gY2FuZGlkYXRlcy5tYXAobm9ybWFsaXplQW5pbWVJdGVtKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShyYXcpKSB7CiAgICAgICAgICAgICAgICAgICAgYW5pbWVMaXN0ID0gcmF3Lm1hcChub3JtYWxpemVBbmltZUl0ZW0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIGZpbmFsIGZhbGxiYWNrOiBpZiBzdGlsbCBlbXB0eSwgc2hvdyBlbXB0eSBtZXNzYWdlCiAgICAgICAgICAgICAgICBpZiAoIWFuaW1lTGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBhcHAuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZXJvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imhlcm8tY29udGVudCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlByZW1pdW0gQW5pbWUgU3RyZWFtaW5nPC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5XYXRjaCB0aG91c2FuZHMgb2YgYW5pbWUgd2l0aCBoaWdoIHF1YWxpdHkgc3RyZWFtaW5nPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9InNlY3Rpb24tdGl0bGUiPkxhdGVzdCBBbmltZTwvaDI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im11dGVkIGxvYWRpbmctdGV4dCI+Tm8gaXRlbXMgZm91bmQgZnJvbSBBUEkuPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gcmVuZGVyIGdyaWQKICAgICAgICAgICAgICAgIGFwcC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVybyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imhlcm8tY29udGVudCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+UHJlbWl1bSBBbmltZSBTdHJlYW1pbmc8L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+V2F0Y2ggdGhvdXNhbmRzIG9mIGFuaW1lIHdpdGggaGlnaCBxdWFsaXR5IHN0cmVhbWluZzwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIj5MYXRlc3QgQW5pbWU8L2gyPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQiPgogICAgICAgICAgICAgICAgICAgICAgICAke2FuaW1lTGlzdC5tYXAocmVuZGVyQW5pbWVDYXJkKS5qb2luKCcnKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdIb21lIGVycm9yJywgZXJyb3IpOwogICAgICAgICAgICAgICAgY29uc3QgbXNnID0gZXJyb3IgJiYgZXJyb3IubWVzc2FnZSA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgYW5pbWUgbGlzdC4gUGxlYXNlIGNoZWNrIHlvdXIgY29ubmVjdGlvbi4nOwogICAgICAgICAgICAgICAgYXBwLmlubmVySFRNTCA9IHJlbmRlckVycm9yKG1zZywgJ3JlbmRlckhvbWUoKScpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiA9PT09PT09PT09IFZJRVc6IERFVEFJTCA9PT09PT09PT09ICovCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcmVuZGVyRGV0YWlsKHNsdWcpIHsKICAgICAgICAgICAgY29uc3QgYXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpOwogICAgICAgICAgICBhcHAuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImxvYWRpbmctdGV4dCI+TG9hZGluZyBhbmltZSBkZXRhaWxzLi4uPC9kaXY+JzsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0IGVuZHBvaW50OiAvYW5pbWUvOnNsdWcKICAgICAgICAgICAgICAgIGNvbnN0IHJhdyA9IGF3YWl0IGFwaUdldChgL2FuaW1lLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHNsdWcpfWApOwogICAgICAgICAgICAgICAgLy8gVHJ5IG11bHRpcGxlIHNoYXBlcyB0byBleHRyYWN0IGFuaW1lIGFuZCBlcGlzb2RlcwogICAgICAgICAgICAgICAgbGV0IGFuaW1lID0gbnVsbDsKICAgICAgICAgICAgICAgIGxldCBlcGlzb2RlcyA9IFtdOwoKICAgICAgICAgICAgICAgIGlmICghcmF3KSB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHJlc3BvbnNlJyk7CgogICAgICAgICAgICAgICAgLy8gY29tbW9uIHNoYXBlczoKICAgICAgICAgICAgICAgIC8vIHsgYW5pbWU6IHsuLi59LCBlcGlzb2RlX2xpc3Q6IFsuLi5dIH0KICAgICAgICAgICAgICAgIGlmIChyYXcuYW5pbWUpIGFuaW1lID0gcmF3LmFuaW1lOwogICAgICAgICAgICAgICAgaWYgKHJhdy5lcGlzb2RlX2xpc3QgfHwgcmF3LmVwaXNvZGVfbGlzdHMgJiYgQXJyYXkuaXNBcnJheShyYXcuZXBpc29kZV9saXN0IHx8IHJhdy5lcGlzb2RlX2xpc3RzKSkgZXBpc29kZXMgPSByYXcuZXBpc29kZV9saXN0IHx8IHJhdy5lcGlzb2RlX2xpc3RzOwoKICAgICAgICAgICAgICAgIC8vIHsgZGF0YTogeyAuLi4gfSB9CiAgICAgICAgICAgICAgICBpZiAoIWFuaW1lICYmIHJhdy5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZCA9IHJhdy5kYXRhOwogICAgICAgICAgICAgICAgICAgIC8vIHRyeSBkLmFuaW1lIG9yIGQuZGV0YWlsIG9yIHRvcC1sZXZlbCBmaWVsZHMKICAgICAgICAgICAgICAgICAgICBhbmltZSA9IGQuYW5pbWUgfHwgZC5kZXRhaWwgfHwgZC5kYXRhIHx8IGQ7CiAgICAgICAgICAgICAgICAgICAgLy8gZXBpc29kZXMgbWF5IGJlIGluIGQuZXBpc29kZV9saXN0IHx8IGQuZXBpc29kZV9saXN0cywgZC5lcGlzb2RlcywgZC5lcGlzb2RlLCBkLmxpc3QKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkLmVwaXNvZGVfbGlzdCB8fCBkLmVwaXNvZGVfbGlzdHMpKSBlcGlzb2RlcyA9IGQuZXBpc29kZV9saXN0IHx8IGQuZXBpc29kZV9saXN0czsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGQuZXBpc29kZXMpKSBlcGlzb2RlcyA9IGQuZXBpc29kZXM7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkLmxpc3QpKSBlcGlzb2RlcyA9IGQubGlzdDsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGQuZXBpc29kZSkpIGVwaXNvZGVzID0gZC5lcGlzb2RlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIGlmIHN0aWxsIG5vdCBmb3VuZCwgdHJ5IHJhdyBmaWVsZHMKICAgICAgICAgICAgICAgIGlmICghYW5pbWUpIHsKICAgICAgICAgICAgICAgICAgICBhbmltZSA9IHJhdzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpemUgYW5pbWUgZmllbGRzIHVzZWQgaW4gdGVtcGxhdGUKICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRBbmltZSA9IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogYW5pbWUudGl0bGUgfHwgYW5pbWUubmFtZSB8fCBhbmltZS5qdWR1bCB8fCBhbmltZS5hbmltZV90aXRsZSB8fCBzbHVnLAogICAgICAgICAgICAgICAgICAgIHBvc3RlcjogYW5pbWUucG9zdGVyIHx8IGFuaW1lLmltYWdlIHx8IGFuaW1lLmNvdmVyIHx8IGFuaW1lLnRodW1iIHx8IGFuaW1lLnRodW1ibmFpbCB8fCAnJywKICAgICAgICAgICAgICAgICAgICBzeW5vcHNpczogYW5pbWUuc3lub3BzaXMgfHwgYW5pbWUuZGVzY3JpcHRpb24gfHwgYW5pbWUub3ZlcnZpZXcgfHwgYW5pbWUuc2lub3BzaXMgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBhbmltZS5zdGF0dXMgfHwgYW5pbWUuc3RhdGUgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgcmF0aW5nOiBhbmltZS5yYXRpbmcgfHwgYW5pbWUuc2NvcmUgfHwgJycsCiAgICAgICAgICAgICAgICAgICAgcmVsZWFzZWQ6IGFuaW1lLnJlbGVhc2VkIHx8IGFuaW1lLnllYXIgfHwgJycKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gbm9ybWFsaXplIGVwaXNvZGVzIGxpc3QgdG8gb2JqZWN0cyB3aXRoIGVwaXNvZGUgYW5kIHNsdWcKICAgICAgICAgICAgICAgIGxldCBlcGlzb2RlTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXBpc29kZXMpICYmIGVwaXNvZGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGVwaXNvZGVMaXN0ID0gZXBpc29kZXMubWFwKGVwPT57CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVwIGNhbiBiZSBzdHJpbmcgb3Igb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXAgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBlcGlzb2RlOiBlcCwgc2x1ZzogZXAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXBpc29kZTogZXAuZXBpc29kZSB8fCBlcC50aXRsZSB8fCBlcC5lcCB8fCBlcC5udW1iZXIgfHwgZXAubm8gfHwgZXAubmFtZSB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbHVnOiBlcC5zbHVnIHx8IGVwLnVybCB8fCBlcC5saW5rIHx8IGVwLnBhdGggfHwgZXAuaWQgfHwgKGVwLnRpdGxlICYmIHNsdWdpZnkoZXAudGl0bGUpKSB8fCAnJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBzb21lIEFQSXMgcmV0dXJuIGVwaXNvZGVzIHVuZGVyIGFuaW1lLmVwaXNvZGVzCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWx0ID0gYW5pbWUuZXBpc29kZXMgfHwgYW5pbWUuZXBpc29kZV9saXN0IHx8IGFuaW1lLmVwaXNvZGVfbGlzdHMgfHwgYW5pbWUubGlzdDsKICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhbHQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVwaXNvZGVMaXN0ID0gYWx0Lm1hcChlcD0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlcCA9PT0gJ3N0cmluZycpIHJldHVybiB7IGVwaXNvZGU6IGVwLCBzbHVnOiBlcCB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgZXBpc29kZTogZXAuZXBpc29kZSB8fCBlcC50aXRsZSB8fCBlcC5uYW1lIHx8ICcnLCBzbHVnOiBlcC5zbHVnIHx8IGVwLnVybCB8fCBlcC5pZCB8fCAoZXAudGl0bGUgJiYgc2x1Z2lmeShlcC50aXRsZSkpIHx8ICcnIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhcHAuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRldGFpbC1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXRhaWwtaGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSIke2VzY2FwZUh0bWwobm9ybWFsaXplZEFuaW1lLnBvc3Rlcil9IiBhbHQ9IiR7ZXNjYXBlSHRtbChub3JtYWxpemVkQW5pbWUudGl0bGUpfSIgY2xhc3M9ImRldGFpbC1wb3N0ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGV0YWlsLWluZm8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT4ke2VzY2FwZUh0bWwobm9ybWFsaXplZEFuaW1lLnRpdGxlKX08L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdlbnJlLWNoaXBzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHsoYW5pbWUuZ2VucmVzIHx8IGFuaW1lLmdlbnJlIHx8IFtdKS5tYXAoZyA9PiBgPHNwYW4gY2xhc3M9ImNoaXAiPiR7ZXNjYXBlSHRtbChnKX08L3NwYW4+YCkuam9pbignJyl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3lub3BzaXMiPiR7ZXNjYXBlSHRtbChub3JtYWxpemVkQW5pbWUuc3lub3BzaXMgfHwgJ05vIHN5bm9wc2lzIGF2YWlsYWJsZS4nKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbmZvLXJvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJpbmZvLWxhYmVsIj5TdGF0dXM6PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2VzY2FwZUh0bWwobm9ybWFsaXplZEFuaW1lLnN0YXR1cyB8fCAnTi9BJyl9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImluZm8tcm93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImluZm8tbGFiZWwiPlJhdGluZzo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7ZXNjYXBlSHRtbChub3JtYWxpemVkQW5pbWUucmF0aW5nIHx8ICdOL0EnKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5mby1yb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaW5mby1sYWJlbCI+UmVsZWFzZWQ6PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2VzY2FwZUh0bWwobm9ybWFsaXplZEFuaW1lLnJlbGVhc2VkIHx8ICdOL0EnKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0ic2VjdGlvbi10aXRsZSI+RXBpc29kZXM8L2gyPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJlcGlzb2RlLWdyaWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtlcGlzb2RlTGlzdC5sZW5ndGggPyBlcGlzb2RlTGlzdC5tYXAoZXAgPT4gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImVwaXNvZGUtY2FyZCIgb25jbGljaz0icm91dGVyLm5hdmlnYXRlKCcvZXBpc29kZS8ke2VuY29kZVVSSUNvbXBvbmVudChlcC5zbHVnKX0nKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVwaXNvZGUgJHtlc2NhcGVIdG1sKGVwLmVwaXNvZGUgfHwgZXAuc2x1Zyl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKS5qb2luKCcnKSA6ICc8ZGl2IGNsYXNzPSJtdXRlZCBsb2FkaW5nLXRleHQiPk5vIGVwaXNvZGVzIGF2YWlsYWJsZTwvZGl2Pid9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RldGFpbCBlcnJvcicsIGVycm9yKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IGVycm9yICYmIGVycm9yLm1lc3NhZ2UgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBsb2FkIGFuaW1lIGRldGFpbHMuJzsKICAgICAgICAgICAgICAgIGFwcC5pbm5lckhUTUwgPSByZW5kZXJFcnJvcihtc2csIGByZW5kZXJEZXRhaWwoJyR7ZXNjYXBlSHRtbChzbHVnKX0nKWApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiA9PT09PT09PT09IFZJRVc6IEVQSVNPREUgPT09PT09PT09PSAqLwogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJlbmRlckVwaXNvZGUoc2x1ZykgewogICAgICAgICAgICBjb25zdCBhcHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJyk7CiAgICAgICAgICAgIGFwcC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibG9hZGluZy10ZXh0Ij5Mb2FkaW5nIGVwaXNvZGUuLi48L2Rpdj4nOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vIGNvcnJlY3QgZW5kcG9pbnQ6IC9lcGlzb2RlLzpzbHVnCiAgICAgICAgICAgICAgICBjb25zdCByYXcgPSBhd2FpdCBhcGlHZXQoYC9lcGlzb2RlLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHNsdWcpfWApOwoKICAgICAgICAgICAgICAgIGlmICghcmF3KSB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHJlc3BvbnNlJyk7CgogICAgICAgICAgICAgICAgLy8gZXhwZWN0ZWQgc2hhcGU6IHsgZXBpc29kZTogey4uLn0sIHNlcnZlcl9saXN0OiBbLi4uXSB9IG9yIGRhdGEuLi4KICAgICAgICAgICAgICAgIGxldCBlcGlzb2RlID0gcmF3LmVwaXNvZGUgfHwgcmF3LmRhdGEgJiYgcmF3LmRhdGEuZXBpc29kZSB8fCByYXcuZGF0YSB8fCByYXc7CiAgICAgICAgICAgICAgICBsZXQgc2VydmVycyA9IHJhdy5zZXJ2ZXJfbGlzdCB8fCByYXcuc2VydmVycyB8fCByYXcuZGF0YSAmJiByYXcuZGF0YS5zZXJ2ZXJzIHx8IHJhdy5zZXJ2ZXIgfHwgW107CgogICAgICAgICAgICAgICAgLy8gU29tZSBBUElzIHJldHVybiBzZXJ2ZXJzIGluc2lkZSBlcGlzb2RlLnNlcnZlcnMKICAgICAgICAgICAgICAgIGlmICgoIXNlcnZlcnMgfHwgIXNlcnZlcnMubGVuZ3RoKSAmJiBlcGlzb2RlICYmIGVwaXNvZGUuc2VydmVycykgewogICAgICAgICAgICAgICAgICAgIHNlcnZlcnMgPSBlcGlzb2RlLnNlcnZlcnM7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gTm9ybWFsaXplIHNlcnZlcnMgLT4gYXJyYXkgb2Yge2lkLG5hbWV9CgogICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBPdGFrdWRlc3UtbGlrZSAnc3RyZWFtX3NlcnZlcnMnIHN0cnVjdHVyZTogW3txdWFsaXR5LCBzZXJ2ZXJzOlt7bmFtZSxpZH0sIC4uLl19LCAuLi5dCiAgICAgICAgICAgICAgICBpZiAoKCFzZXJ2ZXJzIHx8ICFzZXJ2ZXJzLmxlbmd0aCkgJiYgQXJyYXkuaXNBcnJheShyYXcuc3RyZWFtX3NlcnZlcnMpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxhdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIHJhdy5zdHJlYW1fc2VydmVycy5mb3JFYWNoKGdyb3VwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ3JvdXAuc2VydmVycykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwLnNlcnZlcnMuZm9yRWFjaChzID0+IGZsYXQucHVzaChzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoZmxhdC5sZW5ndGgpIHNlcnZlcnMgPSBmbGF0OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEFsc28gc3VwcG9ydCByYXcuc3RyZWFtX3NlcnZlcnMgaW5zaWRlIHJhdy5kYXRhCiAgICAgICAgICAgICAgICBpZiAoKCFzZXJ2ZXJzIHx8ICFzZXJ2ZXJzLmxlbmd0aCkgJiYgcmF3LmRhdGEgJiYgQXJyYXkuaXNBcnJheShyYXcuZGF0YS5zdHJlYW1fc2VydmVycykpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmbGF0MiA9IFtdOwogICAgICAgICAgICAgICAgICAgIHJhdy5kYXRhLnN0cmVhbV9zZXJ2ZXJzLmZvckVhY2goZ3JvdXAgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncm91cC5zZXJ2ZXJzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXAuc2VydmVycy5mb3JFYWNoKHMgPT4gZmxhdDIucHVzaChzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoZmxhdDIubGVuZ3RoKSBzZXJ2ZXJzID0gZmxhdDI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IHNlcnZlckxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlcnZlcnMpKSB7CiAgICAgICAgICAgICAgICAgICAgc2VydmVyTGlzdCA9IHNlcnZlcnMubWFwKHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSByZXR1cm4geyBpZDogcywgbmFtZTogcyB9OwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmF3SWQgPSBzLmlkIHx8IHMuc2VydmVySWQgfHwgcy5zZXJ2ZXIgfHwgcy5rZXkgfHwgcy5uYW1lIHx8IEpTT04uc3RyaW5naWZ5KHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYW4gY29tbW9uIHByZWZpeCBpZiBwcmVzZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJhd0lkID09PSAnc3RyaW5nJyAmJiByYXdJZC5zdGFydHNXaXRoKCcvYW5pbWUvc2VydmVyLycpKSByYXdJZCA9IHJhd0lkLnJlcGxhY2UoJy9hbmltZS9zZXJ2ZXIvJywnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBpZDogcmF3SWQsIG5hbWU6IHMubmFtZSB8fCBzLmxhYmVsIHx8IHMuc2VydmVyIHx8IHMuaWQgfHwgJ1NlcnZlcicgfTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlcnZlcnMgPT09ICdvYmplY3QnICYmIHNlcnZlcnMgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAvLyBvYmplY3QgbWFwCiAgICAgICAgICAgICAgICAgICAgc2VydmVyTGlzdCA9IE9iamVjdC5rZXlzKHNlcnZlcnMpLm1hcChrID0+ICh7IGlkOiBrLCBuYW1lOiBzZXJ2ZXJzW2tdLm5hbWUgfHwgayB9KSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gTm9ybWFsaXplIGVwaXNvZGUgdGl0bGUKICAgICAgICAgICAgICAgIGNvbnN0IGVwaXNvZGVUaXRsZSA9IChlcGlzb2RlICYmIChlcGlzb2RlLnRpdGxlIHx8IGVwaXNvZGUubmFtZSB8fCBlcGlzb2RlLmVwaXNvZGUgfHwgc2x1ZykpIHx8IHNsdWc7CgogICAgICAgICAgICAgICAgYXBwLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkZXRhaWwtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIj4ke2VzY2FwZUh0bWwoZXBpc29kZVRpdGxlKX08L2gyPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwbGF5ZXItY29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InBsYXllckFyZWEiIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDEwMHB4IDA7IGNvbG9yOiB2YXIoLS10ZXh0LXNlY29uZGFyeSk7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWxlY3QgYSBzZXJ2ZXIgdG8gc3RhcnQgc3RyZWFtaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlcnZlci1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3NlcnZlckxpc3QubWFwKChzZXJ2ZXIsIGlkeCkgPT4gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJzZXJ2ZXItYnRuIiBvbmNsaWNrPSJsb2FkU2VydmVyKCcke2VzY2FwZUh0bWwoc2VydmVyLmlkKX0nLCB0aGlzKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2VzY2FwZUh0bWwoc2VydmVyLm5hbWUpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKS5qb2luKCcnKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcGlzb2RlIGVycm9yJywgZXJyb3IpOwogICAgICAgICAgICAgICAgY29uc3QgbXNnID0gZXJyb3IgJiYgZXJyb3IubWVzc2FnZSA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgZXBpc29kZS4nOwogICAgICAgICAgICAgICAgYXBwLmlubmVySFRNTCA9IHJlbmRlckVycm9yKG1zZywgYHJlbmRlckVwaXNvZGUoJyR7ZXNjYXBlSHRtbChzbHVnKX0nKWApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiA9PT09PT09PT09IExPQUQgU0VSVkVSIChQTEFZRVIpID09PT09PT09PT0gKi8KICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkU2VydmVyKHNlcnZlcklkLCBidG5FbGVtZW50KSB7CiAgICAgICAgICAgIGNvbnN0IHBsYXllckFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyQXJlYScpOwogICAgICAgICAgICBpZiAoIXBsYXllckFyZWEpIHJldHVybjsKICAgICAgICAgICAgcGxheWVyQXJlYS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0ibG9hZGluZy10ZXh0Ij5Mb2FkaW5nIHBsYXllci4uLjwvZGl2Pic7CgogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VydmVyLWJ0bicpLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgICAgIGlmIChidG5FbGVtZW50KSBidG5FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vIGNvcnJlY3QgZW5kcG9pbnQ6IC9zZXJ2ZXIvOnNlcnZlcklkCiAgICAgICAgICAgICAgICBjb25zdCByYXcgPSBhd2FpdCBhcGlHZXQoYC9zZXJ2ZXIvJHtlbmNvZGVVUklDb21wb25lbnQoc2VydmVySWQpfWApOwoKICAgICAgICAgICAgICAgIC8vIFRyeSB0byBmaW5kIGVtYmVkIFVSTCBpbiB2YXJpb3VzIGtleXMKICAgICAgICAgICAgICAgIGxldCBlbWJlZFVybCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAoIXJhdykgdGhyb3cgbmV3IEVycm9yKCdFbXB0eSBzZXJ2ZXIgcmVzcG9uc2UnKTsKCiAgICAgICAgICAgICAgICAvLyByYXcgbWF5IGJlIHsgZW1iZWRfdXJsOiAnLi4uJywgdXJsOicnLCBlbWJlZDonJywgZGF0YTp7Li4ufSB9CiAgICAgICAgICAgICAgICBpZiAocmF3LmVtYmVkX3VybCkgZW1iZWRVcmwgPSByYXcuZW1iZWRfdXJsOwogICAgICAgICAgICAgICAgZWxzZSBpZiAocmF3LmVtYmVkKSBlbWJlZFVybCA9IHJhdy5lbWJlZDsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJhdy51cmwpIGVtYmVkVXJsID0gcmF3LnVybDsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJhdy5kYXRhICYmIChyYXcuZGF0YS5lbWJlZCB8fCByYXcuZGF0YS51cmwgfHwgcmF3LmRhdGEuZmlsZSkpIGVtYmVkVXJsID0gcmF3LmRhdGEuZW1iZWQgfHwgcmF3LmRhdGEudXJsIHx8IHJhdy5kYXRhLmZpbGU7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChyYXcucmVzdWx0ICYmIChyYXcucmVzdWx0LmVtYmVkIHx8IHJhdy5yZXN1bHQudXJsKSkgZW1iZWRVcmwgPSByYXcucmVzdWx0LmVtYmVkIHx8IHJhdy5yZXN1bHQudXJsOwoKICAgICAgICAgICAgICAgIC8vIHNvbWUgc2VydmVycyByZXR1cm4gb2JqZWN0IHdpdGggJ2xpbmsnIG9yICdzcmMnCiAgICAgICAgICAgICAgICBpZiAoIWVtYmVkVXJsKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gYXR0ZW1wdCB0byBzZWFyY2ggbmVzdGVkIGZvciBhIHVybC1saWtlIHN0cmluZwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbmRVcmxSZWN1cnNpdmUgPSAob2JqKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2JqKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnN0YXJ0c1dpdGgoJ2h0dHAnKSkgcmV0dXJuIG9iajsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaXQgb2Ygb2JqKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGZpbmRVcmxSZWN1cnNpdmUoaXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKSByZXR1cm4gcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKG9iaikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gZmluZFVybFJlY3Vyc2l2ZShvYmpba10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyKSByZXR1cm4gcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGVtYmVkVXJsID0gZmluZFVybFJlY3Vyc2l2ZShyYXcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChlbWJlZFVybCAmJiB0eXBlb2YgZW1iZWRVcmwgPT09ICdzdHJpbmcnICYmIGVtYmVkVXJsLnN0YXJ0c1dpdGgoJy8vJykpIHsKICAgICAgICAgICAgICAgICAgICAvLyBhZGQgcHJvdG9jb2wKICAgICAgICAgICAgICAgICAgICBlbWJlZFVybCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIGVtYmVkVXJsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChlbWJlZFVybCAmJiBlbWJlZFVybC5zdGFydHNXaXRoKCdodHRwJykpIHsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXJBcmVhLmlubmVySFRNTCA9IGA8aWZyYW1lIGNsYXNzPSJwbGF5ZXItaWZyYW1lIiBzcmM9IiR7ZXNjYXBlSHRtbChlbWJlZFVybCl9IiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+YDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyQXJlYS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0icGFkZGluZzogNDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImNvbG9yOiB2YXIoLS1hY2NlbnQtdGVhbCk7IGZvbnQtc2l6ZTogMThweDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPkZhaWxlZCB0byBmaW5kIGRpcmVjdCBlbWJlZCBVUkw8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iY29sb3I6IHZhcigtLXRleHQtc2Vjb25kYXJ5KTsiPlNlcnZlciByZXNwb25zZTogPHByZSBzdHlsZT0id2hpdGUtc3BhY2U6cHJlLXdyYXA7Y29sb3I6I2M2ZDZkZiI+JHtlc2NhcGVIdG1sKEpTT04uc3RyaW5naWZ5KHJhdykuc2xpY2UoMCwxMjAwKSl9PC9wcmU+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0xvYWQgc2VydmVyIGVycm9yJywgZXJyb3IpOwogICAgICAgICAgICAgICAgcGxheWVyQXJlYS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0icGFkZGluZzogNDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImNvbG9yOiB2YXIoLS1hY2NlbnQtdGVhbCk7IGZvbnQtc2l6ZTogMThweDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPkZhaWxlZCB0byBsb2FkIHBsYXllcjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJjb2xvcjogdmFyKC0tdGV4dC1zZWNvbmRhcnkpOyI+VHJ5IGFub3RoZXIgc2VydmVyPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiA9PT09PT09PT09IFZJRVc6IFNFQVJDSCA9PT09PT09PT09ICovCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcmVuZGVyU2VhcmNoKGtleXdvcmQpIHsKICAgICAgICAgICAgY29uc3QgYXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpOwogICAgICAgICAgICBhcHAuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIj5TZWFyY2ggcmVzdWx0cyBmb3IgIiR7ZXNjYXBlSHRtbChrZXl3b3JkKX0iPC9oMj4KICAgICAgICAgICAgICAgICR7cmVuZGVyU2tlbGV0b24oMTIpfQogICAgICAgICAgICBgOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIC8vIGVuZHBvaW50OiAvc2VhcmNoLzprZXl3b3JkCiAgICAgICAgICAgICAgICBjb25zdCByYXcgPSBhd2FpdCBhcGlHZXQoYC9zZWFyY2gvJHtlbmNvZGVVUklDb21wb25lbnQoa2V5d29yZCl9YCk7CgogICAgICAgICAgICAgICAgbGV0IHJlc3VsdHMgPSBbXTsKICAgICAgICAgICAgICAgIGlmIChyYXcgJiYgQXJyYXkuaXNBcnJheShyYXcucmVzdWx0cykpIHJlc3VsdHMgPSByYXcucmVzdWx0czsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJhdyAmJiBBcnJheS5pc0FycmF5KHJhdy5zZWFyY2hfcmVzdWx0cykpIHJlc3VsdHMgPSByYXcuc2VhcmNoX3Jlc3VsdHM7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChyYXcgJiYgcmF3LmRhdGEgJiYgQXJyYXkuaXNBcnJheShyYXcuZGF0YS5yZXN1bHRzKSkgcmVzdWx0cyA9IHJhdy5kYXRhLnJlc3VsdHM7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChyYXcgJiYgQXJyYXkuaXNBcnJheShyYXcuZGF0YSkpIHJlc3VsdHMgPSByYXcuZGF0YTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocmF3KSkgcmVzdWx0cyA9IHJhdzsKCiAgICAgICAgICAgICAgICAvLyBub3JtYWxpemUgZWFjaAogICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHJlc3VsdHMubWFwKG5vcm1hbGl6ZUFuaW1lSXRlbSk7CgogICAgICAgICAgICAgICAgaWYgKCFub3JtYWxpemVkLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGFwcC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0ic2VjdGlvbi10aXRsZSI+U2VhcmNoIHJlc3VsdHMgZm9yICIke2VzY2FwZUh0bWwoa2V5d29yZCl9IjwvaDI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7cmVuZGVyRXJyb3IoJ05vIGFuaW1lIGZvdW5kIG1hdGNoaW5nIHlvdXIgc2VhcmNoLicsICdyb3V0ZXIubmF2aWdhdGUoIiIpJyl9CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYXBwLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9InNlY3Rpb24tdGl0bGUiPlNlYXJjaCByZXN1bHRzIGZvciAiJHtlc2NhcGVIdG1sKGtleXdvcmQpfSI8L2gyPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQiPgogICAgICAgICAgICAgICAgICAgICAgICAke25vcm1hbGl6ZWQubWFwKHJlbmRlckFuaW1lQ2FyZCkuam9pbignJyl9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICBgOwoKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NlYXJjaCBlcnJvcicsIGVycm9yKTsKICAgICAgICAgICAgICAgIGFwcC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJzZWN0aW9uLXRpdGxlIj5TZWFyY2ggcmVzdWx0cyBmb3IgIiR7ZXNjYXBlSHRtbChrZXl3b3JkKX0iPC9oMj4KICAgICAgICAgICAgICAgICAgICAke3JlbmRlckVycm9yKCdGYWlsZWQgdG8gc2VhcmNoIGFuaW1lLicsIGByZW5kZXJTZWFyY2goJyR7ZXNjYXBlSHRtbChrZXl3b3JkKX0nKWApfQogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcGVyZm9ybVNlYXJjaCgpIHsKICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoSW5wdXQnKTsKICAgICAgICAgICAgY29uc3Qga2V5d29yZCA9IGlucHV0LnZhbHVlLnRyaW0oKTsKICAgICAgICAgICAgaWYgKGtleXdvcmQpIHsKICAgICAgICAgICAgICAgIHJvdXRlci5uYXZpZ2F0ZShgL3NlYXJjaC8ke2VuY29kZVVSSUNvbXBvbmVudChrZXl3b3JkKX1gKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJvdXRlci5uYXZpZ2F0ZSgnLycpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBrZXlib2FyZCBlbnRlciBvbiBzZWFyY2ggaW5wdXQKICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gewogICAgICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hJbnB1dCcpOwogICAgICAgICAgICBpZiAoc2VhcmNoSW5wdXQpIHsKICAgICAgICAgICAgICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHBlcmZvcm1TZWFyY2goKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIHN0YXJ0IHJvdXRlcgogICAgICAgIHJvdXRlci5pbml0KCk7CgogICAgICAgIC8vIE9wdGlvbmFsOiBFWFBPU0Ugc21hbGwgZGVidWcgaGVscGVycyBpbiBjb25zb2xlCiAgICAgICAgd2luZG93Ll9fZGVidWdBcGkgPSB7CiAgICAgICAgICAgIGFwaUdldCwgbm9ybWFsaXplQW5pbWVJdGVtCiAgICAgICAgfTsKCiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+Cg=='))));</script>
